language: node_js
node_js:
  - 8.10

sudo: false

install: true

script:
  - pwd
  - cd webapp
  - npm install aws-sdk
  - ls -al
  - cd node_modules
  - ls -al
  - cd ../../
  - ls -al

after_success:
  - pwd
  - ls -al
  - mkdir codedeploy_artifact
  - cd webapp
  - zip -r csye6225-lambda-${TRAVIS_JOB_NUMBER}.zip node_modules lambda.js
  - ls -al
  - cd ..
  - mv webapp/csye6225-lambda-${TRAVIS_JOB_NUMBER}.zip codedeploy_artifact/
  - ls -al
  - pwd
  - cd codedeploy_artifact
  - ls -al
  - pwd
  - cd ..
  - pwd
  - ls -al
